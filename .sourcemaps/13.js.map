{"version":3,"sources":["../../src/pages/cart-detail/cart-detail.module.ts","../../src/pages/cart-detail/cart-detail.ts"],"names":[],"mappings":"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","file":"13.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { CartDetailPage } from './cart-detail';\n\n@NgModule({\n  declarations: [\n    CartDetailPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(CartDetailPage),\n  ],\n})\nexport class CartDetailPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cart-detail/cart-detail.module.ts","import {Component} from \"@angular/core\";\nimport {IonicPage, NavController, NavParams, AlertController} from 'ionic-angular';\nimport {NativeProvider} from '../../providers/native/native';\nimport {ToastService} from '../../services/ToastService';\nimport {AppGlobal, AppService} from '../../app/app.service';\n/**\n * Generated class for the CartDetailPage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-cart-detail',\n  templateUrl: 'cart-detail.html',\n})\nexport class CartDetailPage {\n  shopcart;\n  total: any;\n  username;\n  address;\n  totalNum: number;\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, private native: NativeProvider,\n              public toastCtrl: ToastService, private appService: AppService, private alertCtrl: AlertController) {\n    this.username = AppGlobal.user.username;\n    this.address = {\n      nickname: '',\n      phone: '',\n      description: ''\n    }\n    this.getData();\n  }\n\n  // 进入页面获取收货地址\n  ionViewWillEnter() {\n    this.getAddress();\n  }\n\n  // 获取订单信息\n  getData() {\n    this.shopcart = this.navParams.get('shops');\n    this.totalNum = 0;\n    this.numAllPrice();\n  }\n\n  // 获取收货地址\n  getAddress() {\n    let params = {\n      username: this.username,\n      defult: true\n    }\n    this.appService.httpGet('/getAddress', params, val => {\n      console.log(val.data);\n      if (val.data) {\n        this.address = val.data;\n      }\n    }, true)\n  }\n\n  /**\n   * 计算所有商品价格\n   */\n  numAllPrice() {\n    let finalprise = 0;\n    for (let i = 0; i < this.shopcart.length; i++) {\n      let shops = this.shopcart[i];\n      finalprise += (shops.number * shops.price);\n      this.totalNum += shops.number;\n    }\n    this.total = finalprise;\n    console.log(finalprise);\n  }\n\n  saveOrder() {\n    if (this.address.phone != '') {\n      for (let i = 0; i < this.shopcart.length; i++) {\n        this.shopcart[i].addressid = this.address.id;\n      }\n      this.appService.httpPost('/saveOrder', this.shopcart, rs => {\n        for (let v of this.shopcart) {\n          this.native.delete([v.clothesid, this.username]);\n        }\n        this.navCtrl.pop();\n      }, true);\n    } else {\n      this.appService.toast('请先添加收货地址');\n    }\n  }\n\n  //进入地址页面\n  goAddress() {\n    this.navCtrl.push('AddressPage', {choose: true})\n  }\n\n  // 右滑返回\n  swipeEvent(v) {\n    this.navCtrl.pop();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cart-detail/cart-detail.ts"],"sourceRoot":""}