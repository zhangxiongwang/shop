{"version":3,"sources":["../../src/pages/cart/cart.module.ts","../../src/pages/cart/cart.ts"],"names":[],"mappings":"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","file":"12.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { CartPage } from './cart';\n\n@NgModule({\n  declarations: [\n    CartPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(CartPage),\n  ],\n})\nexport class CartPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cart/cart.module.ts","'use strict'\nimport {Component} from '@angular/core';\nimport {AlertController, IonicPage, NavController, NavParams, LoadingController} from 'ionic-angular';\nimport {NativeProvider} from '../../providers/native/native'\nimport {ToastService} from \"../../services/ToastService\";\nimport {AppGlobal} from '../../app/app.service';\n\n@IonicPage()\n@Component({\n  selector: 'page-cart',\n  templateUrl: 'cart.html',\n})\nexport class CartPage {\n  shopcart: Array<any> = [];\n  total: number = 0;\n  msgList: Array<any> = [];\n  showBack;\n  loading: any;\n  ischeck: boolean = false;\n  badge: number = 0;\n  username: string;\n\n  constructor(public alertCtrl: AlertController, public navCtrl: NavController, public navParams: NavParams,\n              public toastCtrl: ToastService, public native: NativeProvider, private loadingCtrl: LoadingController) {\n    // 判断是否显示后退键\n    if (this.navParams.get('showBack')) {\n      this.showBack = true;\n    } else {\n      this.showBack = false;\n    }\n    this.username = AppGlobal.user.username;\n    // this.shopcart = [\n    //   {\n    //     imgurl: 'assets/user.jpg',\n    //     price: 200,\n    //     description: '大叔控',\n    //     number: 1,\n    //     checked: false\n    //   },\n    //   {\n    //     imgurl: 'assets/user.jpg',\n    //     price: 140,\n    //     description: '真格还活动我啊搜ID哈斯还很大奥斯卡大恒科技爱是可敬的哈萨克',\n    //     number: 1,\n    //     checked: false\n    //   }\n    // ]\n  }\n\n  ionViewWillEnter() {\n    this.loadData();\n    console.log('进入页面');\n  }\n\n  setLoading() {\n    this.loading = this.loadingCtrl.create({\n      content: ''\n    });\n    this.loading.present();\n  }\n\n  //初始化数据\n  loadData() {\n    this.native.query(['待提交', this.username]).then((data) => {\n      this.shopcart = data;\n      for (let i = 0; i < this.shopcart.length; i++) {\n        this.shopcart[i].checked = false;\n      }\n      this.badge = 0;\n      this.numAllPrice();\n    }).catch(error => {\n      this.toastCtrl.toast(error.message);\n    })\n  }\n\n  /**\n   * 商品添加\n   */\n  increment(item_index) {\n    console.log(this.shopcart[item_index]);\n    ++this.shopcart[item_index].number;\n    this.numAllPrice();\n  }\n\n  /**\n   * 商品减少\n   */\n  decrement(item_index) {\n    if (this.shopcart[item_index].number == 1) {\n      this.toastCtrl.toast(\"不能再少了\");\n    } else {\n      --this.shopcart[item_index].number;\n    }\n    this.numAllPrice();\n  }\n\n  /**\n   * 计算所有商品价格\n   */\n  numAllPrice() {\n    let finalprise = 0;\n    for (let i = 0; i < this.shopcart.length; i++) {\n      let shops = this.shopcart[i];\n      if (shops.checked == true) {\n        finalprise += (shops.number * shops.price);\n      }\n    }\n    this.total = finalprise;\n    console.log(finalprise);\n  }\n\n  // 选中商品\n  choose(item) {\n    if (item.checked == true) {\n      this.badge += 1;\n    } else {\n      this.badge -= 1;\n    }\n    this.numAllPrice();\n  }\n\n  // 移除商品\n  remove(item_index) {\n    this.showConfirm(item_index);\n  }\n\n  /**\n   * 弹出提示\n   */\n  showConfirm(item_index) {\n    let confirm = this.alertCtrl.create({\n      title: '温馨提示',\n      message: '是否要删除该商品?',\n      buttons: [\n        {\n          text: '再看看',\n          handler: () => {\n            console.log('Disagree clicked');\n          }\n        },\n        {\n          text: '是的',\n          handler: () => {\n            this.deleteData(this.shopcart[item_index].clothesid);\n            this.shopcart.splice(item_index, 1);\n            this.numAllPrice();\n          }\n        }\n      ]\n    });\n    confirm.present();\n  }\n\n  // 删除数据库中的数据\n  deleteData(id) {\n    this.native.delete([id, this.username]).then(() => {\n      console.log('移除成功')\n    }).catch(error => {\n      this.toastCtrl.toast(error.message);\n    })\n  }\n\n  checkout() {\n    let shops: Array<any> = [];\n    for (let i = 0; i < this.shopcart.length; i++) {\n      let shop = this.shopcart[i];\n      if (shop.checked == true) {\n        shops.push(shop);\n      }\n    }\n    this.navCtrl.push('CartDetailPage', {shops: shops});\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cart/cart.ts"],"sourceRoot":""}