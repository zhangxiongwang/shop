{"version":3,"sources":["../../src/pages/new-address/new-address.module.ts","../../src/pages/new-address/new-address.ts"],"names":[],"mappings":"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","file":"10.js","sourcesContent":["import {NgModule} from '@angular/core';\nimport {IonicPageModule} from 'ionic-angular';\nimport {NewAddressPage} from './new-address';\nimport {MultiPickerModule} from 'ion-multi-picker';\n\n@NgModule({\n  declarations: [\n    NewAddressPage,\n  ],\n  imports: [\n    MultiPickerModule,\n    IonicPageModule.forChild(NewAddressPage),\n  ],\n})\nexport class NewAddressPageModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/new-address/new-address.module.ts","import {Component} from '@angular/core';\nimport {IonicPage, NavController, NavParams} from 'ionic-angular';\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\nimport {CityDataProvider} from \"../../providers/city-data/city-data\";\nimport {ToastService} from '../../services/ToastService';\nimport {AppGlobal, AppService} from '../../app/app.service';\n\n\n/**\n * Generated class for the NewAddressPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-new-address',\n  templateUrl: 'new-address.html',\n})\nexport class NewAddressPage {\n  addressForm: FormGroup;\n  username: string;\n  nickname: any;\n  phone: any;\n  cityColumns: any[]; //城市数据\n  //area即为最终选中的省市区数据\n  area = {\n    province: \"\",\n    city: \"\",\n    district: \"\"\n  };\n  description: any;\n  edit: boolean = false;\n  placehoder: any = '省、市、区';\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, private fb: FormBuilder, private cityDataProvider: CityDataProvider, private toastCtrl: ToastService, private appService: AppService) {\n    this.addressForm = this.fb.group({\n      nickname: ['', Validators.compose([Validators.required, Validators.maxLength(10), Validators.minLength(1)])],\n      phone: ['', Validators.compose([Validators.minLength(11), Validators.maxLength(11), Validators.required, Validators.pattern(\"^(13[0-9]|15[012356789]|17[03678]|18[0-9]|14[57])[0-9]{8}$\")])],\n      description: ['', Validators.compose([Validators.required])]\n    })\n    this.nickname = this.addressForm.controls['nickname'];\n    this.phone = this.addressForm.controls['phone'];\n    this.description = this.addressForm.controls['description'];\n    // 获取省市区\n    this.cityColumns = this.cityDataProvider.cities;\n    this.username = AppGlobal.user.username;\n    this.edit = this.navParams.get('edit') ? true : false;\n    if (this.edit) {\n      this.phone.value = this.navParams.get('address').phone;\n      this.placehoder = this.navParams.get('address').address;\n      this.nickname.value = this.navParams.get('address').nickname;\n      this.description.value = this.navParams.get('address').description;\n    }\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad NewAddressPage');\n  }\n\n  /**\n   * 城市选择器被改变时触发的事件\n   * @param event\n   */\n  cityChange(event) {\n    this.area.province = event[0].text;\n    this.area.city = event[1].text;\n    this.area.district = event[2].text;\n    console.log(this.placehoder);\n  }\n\n  //保存\n  save(val) {\n    if (this.edit) {\n      this.updateAddress(val);\n    } else {\n      this.addAddress(val);\n    }\n  }\n\n  // 更新地址\n  updateAddress(val) {\n    let city: string;\n    city = this.navParams.get('address').address;\n    if (this.area.city && this.area.city != '') {\n      city = this.area.province + this.area.city + this.area.district;\n    }\n    let address = {\n      username: this.navParams.get('address').username,\n      nickname: val.nickname,\n      phone: val.phone,\n      description: val.description,\n      defult: this.navParams.get('address').defult,\n      address: city,\n      id: this.navParams.get('address').id\n    }\n    this.appService.httpPost('/updateById', address, v => {\n      if (v.data == 'ok') {\n        this.appService.toast('更新成功');\n        this.navCtrl.pop();\n      }\n    }, true);\n  }\n\n  // 添加地址\n  addAddress(val) {\n    if (this.area.province) {\n      let address = {\n        username: this.username,\n        nickname: val.nickname,\n        phone: val.phone,\n        description: val.description,\n        defult: false,\n        address: this.area.province + this.area.city + this.area.district\n      }\n      this.appService.httpPost('/addAddress', address, v => {\n        if (v.data == 'ok') {\n          this.appService.toast('添加成功');\n          this.navCtrl.pop();\n        }\n      }, true);\n    } else {\n      this.toastCtrl.toast('请先选择所在地')\n    }\n  }\n\n  // 右滑返回\n  swipeEvent(v) {\n    if (v.direction == 4) {\n      this.navCtrl.pop();\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/new-address/new-address.ts"],"sourceRoot":""}