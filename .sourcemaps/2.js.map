{"version":3,"sources":["../../src/pages/home/home.module.ts","../../src/components/components.module.ts","../../src/components/ion-products/ion-products.ts","../../src/components/image-selector/image-selector.ts","../../src/components/img-lazy-load/img-lazy-load.ts","../../src/pages/home/home.ts"],"names":[],"mappings":"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","file":"2.js","sourcesContent":["import {ComponentsModule} from './../../components/components.module';\nimport {NgModule} from '@angular/core';\nimport {IonicPageModule} from 'ionic-angular';\nimport {HomePage} from './home';\n@NgModule({\n  declarations: [\n    HomePage\n  ],\n  imports: [\n    IonicPageModule.forChild(HomePage),\n    ComponentsModule,\n\n  ],\n})\nexport class HomePageModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.module.ts","import {IonicModule} from 'ionic-angular';\nimport {NgModule} from '@angular/core';\nimport {IonProductsComponent} from './ion-products/ion-products';\nimport {ImageSelectorComponent} from './image-selector/image-selector';\nimport { ImgLazyLoadComponent } from './img-lazy-load/img-lazy-load';\n\n@NgModule({\n  declarations: [IonProductsComponent,\n    ImageSelectorComponent,\n    ImgLazyLoadComponent,\n  ],\n  imports: [\n    IonicModule\n  ],\n  exports: [IonProductsComponent,\n    ImageSelectorComponent,\n    ImgLazyLoadComponent,\n  ]\n})\nexport class ComponentsModule {\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/components.module.ts","import { NavController } from 'ionic-angular';\nimport { Component, Input } from '@angular/core';\n@Component({\n  selector: 'ion-products',\n  templateUrl: 'ion-products.html'\n})\nexport class IonProductsComponent {\n  @Input() products: Array<any>;\n  constructor(public navCtrl: NavController) {\n    console.log('Hello IonProducts Component');\n  }\n  goDetails(item) {\n    this.navCtrl.push('ProductDetailsPage', { item: item });\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ion-products/ion-products.ts","import {Component, Input, Output, EventEmitter, ElementRef, ViewChild} from '@angular/core';\nimport {ModalController} from 'ionic-angular';\n\nexport interface IImageObj {\n  id: string;\n  originPath: string;\n  thumbPath?: string;\n  name?: string;\n}\n/**\n * Generated class for the ImageSelecterComponent component.\n *\n * See https://angular.io/docs/ts/latest/api/core/index/ComponentMetadata-class.html\n * for more info on Angular Components.\n */\n@Component({\n  selector: 'image-selector',\n  templateUrl: 'image-selector.html'\n})\nexport class ImageSelectorComponent {\n\n  @Input() max: number = 9;  //最多可选择多少张图片，默认为4张\n\n  @Input() canAdd: boolean = true;  //是否允许新增\n  @Input() canDelete: boolean = true;  //是否允许删除\n  @Input() images: IImageObj[] = [];   //图片列表,与fileObjListChange形成双向数据绑定\n\n  @Output() addImage = new EventEmitter<any>();\n  @Output() selectChanged = new EventEmitter<any>();\n\n  width: string;\n  @ViewChild('addImage') img: ElementRef;\n\n  constructor(public modalCtrl: ModalController) {\n  }\n\n  onAddImage() {//新增照片\n    this.addImage.emit();\n  }\n\n  ngAfterViewChecked() {\n    this.width = this.img.nativeElement.width + 'px';\n  }\n\n  //照片预览\n  onViewImages(index: number) {\n    //以下代码自行调整\n    let imgCopies = JSON.parse(JSON.stringify(this.images));    //复制对象，以免内部修改了对象\n    let modal = this.modalCtrl.create('ImageViewerPage', {\n      selectedIndex: index,\n      images: imgCopies,\n      canEdit: this.canDelete\n    });\n    modal.onDidDismiss(data => {\n      if (data) {\n        this.images = data;\n        this.selectChanged.emit(data);\n      }\n    });\n    modal.present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/image-selector/image-selector.ts","import {Component, Input} from '@angular/core';\n\n/**\n * Generated class for the ImgLazyLoadComponent component.\n *\n * See https://angular.io/api/core/Component for more info on Angular\n * Components.\n */\n@Component({\n  selector: 'img-lazy-load',\n  templateUrl: 'img-lazy-load.html'\n})\nexport class ImgLazyLoadComponent {\n\n  default: string = 'assets/person.jpg';\n\n  constructor() {\n\n  }\n\n  @Input() src: string //要显示的图片\n\n  ngOnInit() {\n    let img = new Image();\n    img.src = this.src;\n    img.onload = () => {\n      //这里为了达到演示效果给了两秒的延迟，实际使用中不需要延迟\n      // setTimeout(() => {\n      this.default = this.src;\n      // }, 2000)\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/img-lazy-load/img-lazy-load.ts","import {AppService, AppGlobal} from './../../app/app.service';\nimport {Component, ViewChild} from '@angular/core';\nimport {NavController, IonicPage, Slides} from 'ionic-angular';\nimport {Storage} from '@ionic/storage';\nimport {JPush} from '@jiguang-ionic/jpush';\nimport {JPushService} from '../../services/jpushService';\nimport {CameraService} from '../../services/CameraService';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html'\n})\nexport class HomePage {\n\n  @ViewChild(Slides) homeSlider: Slides;\n  slides: Array<any> = [];\n  categories: Array<any> = [];\n  products: Array<any> = [];\n  timeoutId: any;\n  // 用来判断sliders数组长度，在页面便于控制slider在数组有值的时候显示\n  len: any;\n  mySearch: string;\n  user = {\n    username: ''\n  };\n\n  params = {\n    favoritesId: 2054400,\n    pageNo: 0,\n    pageSize: 20\n  }\n\n  constructor(public appService: AppService, public navCtrl: NavController, public storage: Storage, public jpush: JPush, public jpushService: JPushService, private camera: CameraService) {\n    this.getUser();\n    this.camera.init();\n  }\n\n  getUser() {\n    this.storage.get('userinfo').then((val) => {\n      console.log(val);\n      this.user.username = val.username;\n      AppGlobal.setUser(val);\n      this.storage.get('domain').then(val => {\n        console.log(val);\n        AppGlobal.setDomain(val);\n        this.getSlides();\n        this.getCategories();\n        this.getProducts();\n      });\n      this.jpushService.initJPush();\n      this.jpushService.setAlias(this.user.username);\n      this.jpushService.setTags([this.user.username]);\n    });\n  }\n\n  //获取幻灯片\n  getSlides() {\n    var params = {\n      favoritesId: 2056439,\n      pageNo: 0,\n      pageSize: 5\n    }\n    this.appService.httpGet(AppGlobal.API.getProducts, params, rs => {\n      this.slides = rs.content;\n      // 给len负值\n      this.len = this.slides.length;\n    })\n  }\n\n  //获取分类\n  getCategories() {\n    this.appService.httpGet(AppGlobal.API.getCategories, null, rs => {\n      this.categories = rs.data;\n    })\n  }\n\n  //获取首页推荐列表\n  getProducts() {\n    this.appService.httpGet(AppGlobal.API.getProducts, this.params, rs => {\n      this.products = rs.content;\n    }, true)\n  }\n\n  //商品详情\n  goDetails(item) {\n    this.navCtrl.push('ProductDetailsPage', {item: item});\n  }\n\n  goProductList(item) {\n    this.navCtrl.push('ProductListPage', {item: item});\n  }\n\n  onInput(e) {\n    let val = e.target.value;\n    if (val && val.trim() != '') {\n      this.mySearch = val;\n    }\n  }\n\n  onCancel(e) {\n    this.mySearch = '';\n  }\n\n  onClear(e) {\n    this.mySearch = '';\n  }\n\n  goSearch() {\n    this.navCtrl.push('SearchPage', {mySearch: this.mySearch});\n    this.mySearch = '';\n  }\n\n  //解决切换其他页面回去轮播图不动问题\n  ionViewWillEnter() {\n    if (this.homeSlider) {\n      this.homeSlider.startAutoplay();\n    }\n  }\n\n  ionViewWillLeave() {\n    if (this.homeSlider) {\n      this.homeSlider.stopAutoplay();\n    }\n    if (this.timeoutId) {\n      clearTimeout(this.timeoutId);\n    }\n  }\n\n  // 监听slider事件\n  slideChanged() {\n    this.timeoutId = setTimeout(() => {\n      if (this.homeSlider._autoplaying == false) {\n        this.homeSlider.startAutoplay();\n      }\n    }, 2000);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts"],"sourceRoot":""}